# 实验室服务器重装系统指南


------

这篇笔记介绍如何对实验室的服务器进行重新安装

主要分为以下几个步骤：

> 1. 下载需要的操作系统ISO镜像文件
> 2. 确定所需要的机器所在的远控制卡IPV6地址
> 3. 通过远程控制卡进行系统安装
> 4. 通过HTTP代理进行系统更新和软件安装

组内成员可以修改，完善该Markdown文件。
作者：马超 mctt90@gmail.com

------

## 下载需要的操作系统ISO镜像文件

这个步骤就不用多说了，选择下载自己需要的ISO镜像文件即可。需要注意的是应该下载64位版本。

## 确定所需要的机器所在的远程控制卡IPV6地址

实验室的服务器可以通过远程控制卡进行管理，例如电源开启，关闭，重启等，这样就不用每次都跑到2楼机房操作服务器了。

远程控制卡可以通过web页面打开，为了一些组建的支持，例如AxtiveX，我们最好使用IE浏览器（这个没有办法，虽然IE非常挫）。这里以48台刀片服务器为例。组里的刀片服务器以16台为一组，共分为3个刀箱。其对应的远程控制卡IPV6地址如下：

| 制造号       | 编号   |  地址  |
| -------------| -----:  | :----:  |
| CMC-91X4W2X  | 01 ~ 16 | [2001:da8:201:1146:a6ba:dbff:fe34:8319]|
| CMC-3ZW4W2X  | 17 ~ 32 | [2001:da8:201:1146:a6ba:dbff:fe34:7d9f]|
| CMC-H2X4W2X  | 33 ~ 48 | [2001:da8:201:1146:a6ba:dbff:fe35:954] |

## 通过远程控制卡进行系统安装

选择IPV6地址并通过浏览器地址栏打开即可。注意：IE浏览器会发出警告：**此网站的安全证书有问题**。 点击**继续浏览此网站**忽略即可。后面会有很多页面发出这个警告，通通忽略。
然后通过**用户名**和**密码**登陆即可。

登陆后在右侧选择需要安装的服务器。
点击**设置**，在选项**第一个引导设备**中选择虚拟**CD/DVD**。
点击**属性**，**选择启动远程控制台**。依旧一路忽略警告。在此需要注意，浏览器需要通过AxtiveX插件来运行一个jnlp程序，默认情况下浏览器会自动运行，如果有异常，浏览器会无法识别jnlp程序，则会弹出一个下载框然你下载程序，这个时候则需要设置一下：点击**启动iDRAC gui**,点击**虚拟控制台预览**中的**设置**，将**IE的控制台插件类型**选择为**ActiveX**即可。
如果远程控制台成功打开，则会出现一个类似于cmd的命令行界面。但是比较坑爹的是工具栏上各种字符乱码，不要管他，记下按键的顺序和位置。
选择**（E）**，在**ISO**中选择ISO镜像文件，点击后面的**CD/DVD**，然后选择最右下键的**退出键**。
这个时候**reboot**一下机器就可以了，服务器会自动进入安装界面。
在安装过程中可以配置IP地址，DNS等信息，在这里需要指出，一般来说都配置成为内网ip，即10.0.0.xx,等形式，xx为机器的编号。子网掩码为：255.255.255.0，网关可以设置为10.0.0.127。

## 通过HTTP代理进行系统更新和软件安装

由于服务器设置的是内网IP，所以可以通过组里的http代理进行对外网的访问，输入如下命令：
```script
export http_proxy://
export https_proxy://
```

然后就可更新软件了，例如对于Ubuntu系统可以进行如下命令：
```
sudo apt-get update
sudo apt-get upgrade
```


（完）
